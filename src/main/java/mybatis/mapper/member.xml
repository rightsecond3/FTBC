<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper     PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"     "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mybatis.mapper.MemberMapper">
	<resultMap type="HashMap" id="mem_pfimg">
    	<result property="mem_pfimg"  column="mem_pfimg" jdbcType="CLOB" javaType="java.lang.String" />
	</resultMap>
	<select id="emailCheck" parameterType="mVO" resultType="String">
		select nvl2((SELECT mem_email
		  			 FROM mem
		 			WHERE mem_email = #{mem_email}),'0','1') FROM dual
	</select>
	<insert id="join" parameterType="mVO">
		INSERT INTO mem(mem_email,mem_name,mem_pw)
			   VALUES(#{mem_email},#{mem_name},#{mem_pw})
	</insert>
	<select id="login" parameterType="mVO" statementType="CALLABLE">
		{call proc_login(
		#{mem_email, mode=IN, jdbcType=VARCHAR, javaType=java.lang.String}
      	,#{mem_pw, mode=IN, jdbcType=VARCHAR, javaType=java.lang.String}
      	,#{mem_name, mode=OUT, jdbcType=VARCHAR, javaType=java.lang.String}
      	,#{mem_authority, mode=OUT, jdbcType=NUMERIC, javaType=java.lang.String}
      	,#{msg,mode=OUT,jdbcType=VARCHAR, javaType=java.lang.String}
      )}
	</select>
	<select id="test" parameterType="mVO" resultMap="mem_pfimg">
		select  mem_pfimg from mem where mem_email=#{mem_email}
	</select>
   <select id="getPublicKey" parameterType="String" resultType="String">
   		SELECT MEM_PUBLICKEY from mem where mem_email = #{mem_email}
   </select>
</mapper>